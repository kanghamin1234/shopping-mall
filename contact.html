<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Contact Us - Luxury Lobby</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@700&family=Montserrat:wght@400;500&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Montserrat', sans-serif;
            margin: 0;
            padding: 0;
            color: #333;
            background-color: #fdfdfd;
            display: flex;
            flex-direction: column;
            min-height: 100vh;
        }
        h1, h2, h3 { font-family: 'Playfair Display', serif; }
        
        /* Ìó§Îçî Ïä§ÌÉÄÏùº */
        header {
            background-color: #1a1a1a;
            color: white;
            padding: 1rem 2rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
            border-bottom: 1px solid #444;
        }
        nav ul { list-style: none; display: flex; gap: 25px; margin: 0; padding: 0; }
        nav a { color: white; text-decoration: none; font-weight: bold; transition: color 0.3s ease; }
        nav a:hover { color: #e0c280; }

        /* Ïª®ÌÖåÏù¥ÎÑà Ïä§ÌÉÄÏùº */
        .container { 
            flex: 1;
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 60px 20px;
        }

        .contact-form-container {
            background: white;
            padding: 50px;
            border-radius: 8px;
            box-shadow: 0 8px 25px rgba(0,0,0,0.08);
            width: 100%;
            max-width: 600px;
        }

        .contact-form-container h2 {
            text-align: center;
            font-size: 2.5rem;
            margin-bottom: 10px;
            margin-top: 0;
        }

        .contact-form-container p {
            text-align: center;
            color: #666;
            margin-bottom: 40px;
        }

        .form-group { margin-bottom: 20px; }
        
        label { display: block; margin-bottom: 8px; font-weight: 500; color: #555; }

        input, textarea {
            width: 100%;
            padding: 12px;
            box-sizing: border-box;
            border: 1px solid #ddd;
            border-radius: 4px;
            font-family: 'Montserrat', sans-serif;
            font-size: 1rem;
            transition: border-color 0.3s ease;
        }
        
        input:focus, textarea:focus { outline: none; border-color: #e0c280; }
        textarea { height: 150px; resize: vertical; }

        button {
            width: 100%;
            padding: 15px;
            background-color: #333;
            color: white;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-size: 1.1rem;
            text-transform: uppercase;
            letter-spacing: 1px;
            transition: background-color 0.3s ease;
            margin-top: 10px;
        }
        button:hover { background-color: #e0c280; color: #333; }

        /* Q&A Í≤åÏãúÌåê Ïä§ÌÉÄÏùº */
        .qna-section { width: 100%; max-width: 800px; margin-top: 60px; }
        .qna-header { text-align: center; margin-bottom: 30px; }
        .qna-table { width: 100%; border-collapse: collapse; background: white; box-shadow: 0 5px 15px rgba(0,0,0,0.05); border-radius: 8px; overflow: hidden; }
        .qna-table th, .qna-table td { padding: 15px; text-align: left; border-bottom: 1px solid #eee; }
        .qna-table th { background-color: #333; color: white; font-weight: 500; }
        .qna-row { cursor: pointer; transition: background-color 0.2s; }
        .qna-row:hover { background-color: #f9f9f9; }
        .status-badge { padding: 4px 8px; border-radius: 4px; font-size: 0.8rem; font-weight: bold; }
        .status-pending { background-color: #eee; color: #666; }
        .status-answered { background-color: #e0c280; color: #333; }
        
        .qna-detail-row { display: none; background-color: #fdfdfd; }
        .qna-detail-content { padding: 30px; line-height: 1.6; }
        .qna-question { margin-bottom: 30px; padding-bottom: 20px; border-bottom: 1px solid #eee; }
        .qna-answer { background-color: #f5f5f5; padding: 20px; border-radius: 8px; position: relative; }
        .qna-answer::before { content: 'A.'; position: absolute; left: -25px; top: 0; font-weight: bold; font-size: 1.5rem; color: #e0c280; }
        .qna-question::before { content: 'Q.'; display: inline-block; margin-right: 10px; font-weight: bold; font-size: 1.2rem; color: #333; }

        .admin-reply-form { margin-top: 20px; }
        .admin-reply-form textarea { height: 100px; margin-bottom: 10px; }
        .lock-icon { margin-right: 5px; font-size: 0.9rem; }

        /* ÌéòÏù¥ÏßÄÎÑ§Ïù¥ÏÖò Ïä§ÌÉÄÏùº */
        .pagination { display: flex; justify-content: center; gap: 10px; margin-top: 20px; }
        .page-btn {
            padding: 8px 12px;
            border: 1px solid #ddd;
            background-color: white;
            color: #333;
            border-radius: 4px;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        .page-btn:hover { background-color: #f0f0f0; }
        .page-btn.active { background-color: #333; color: white; border-color: #333; }

        footer { background-color: #1a1a1a; color: #aaa; text-align: center; padding: 20px; margin-top: auto; }
    </style>
</head>
<body>
    <header>
        <h1><a href="index.html" style="color: white; text-decoration: none; font-family: 'Playfair Display', serif;">Luxury Lobby</a></h1>
        <nav>
            <ul>
                <li><a href="home.html" style="color: #e0c280;">Home</a></li>
                <li><a href="shop.html">Shop</a></li>
                <li id="mypage-link-li" style="display: none;"><a href="mypage.html">My Page</a></li>
                <li id="cart-link-li" style="display: none;"><a href="cart.html">Cart</a></li>
                <li><a href="login.html" id="login-link">Login</a></li>
            </ul>
        </nav>
    </header>

    <div class="container">
        <div class="contact-form-container">
            <h2>Contact Us</h2>
            <p>Have any questions? We'd love to hear from you.</p>
            
            <form onsubmit="submitForm(event)">
                <div class="form-group">
                    <label for="title">Title</label>
                    <input type="text" id="title" placeholder="Subject" required>
                </div>
                <div class="form-group">
                    <label for="name">Name</label>
                    <input type="text" id="name" placeholder="Your Name" required>
                </div>
                <div class="form-group">
                    <label for="email">Email</label>
                    <input type="email" id="email" placeholder="Your Email" required>
                </div>
                <div class="form-group">
                    <label>Privacy Options</label>
                    <div style="display: flex; gap: 20px; margin-top: 10px;">
                        <label style="display: flex; align-items: center; cursor: pointer;">
                            <input type="radio" name="privacy" value="public" checked onclick="togglePasswordInput(false)" style="width: auto; margin-right: 8px;"> Public
                        </label>
                        <label style="display: flex; align-items: center; cursor: pointer;">
                            <input type="radio" name="privacy" value="private" onclick="togglePasswordInput(true)" style="width: auto; margin-right: 8px;"> Private (Secret)
                        </label>
                    </div>
                </div>
                <div class="form-group" id="password-group" style="display: none;">
                    <label for="post-password">Password</label>
                    <input type="password" id="post-password" placeholder="Enter password for this post">
                </div>
                <div class="form-group">
                    <label for="message">Message</label>
                    <textarea id="message" placeholder="How can we help you?" required></textarea>
                </div>
                <button type="submit">Send Message</button>
            </form>
        </div>

        <div class="qna-section">
            <h2 class="qna-header">Q&A Board</h2>
            <div style="display: flex; justify-content: flex-end; margin-bottom: 10px;">
                <input type="text" id="qna-search-input" placeholder="Search by title or author..." style="width: 250px; margin-right: 10px; padding: 8px; margin-bottom: 0;" onkeyup="if(event.key === 'Enter') searchQna()">
                <button onclick="searchQna()" style="width: auto; padding: 8px 15px; margin-top: 0;">Search</button>
            </div>
            <table class="qna-table">
                <thead>
                    <tr>
                        <th style="width: 10%;">No.</th>
                        <th style="width: 50%;">Title</th>
                        <th style="width: 15%;">Author</th>
                        <th style="width: 15%;">Date</th>
                        <th style="width: 10%;">Status</th>
                    </tr>
                </thead>
                <tbody id="qna-list-body">
                    <!-- JSÎ°ú Î™©Î°ù ÏÉùÏÑ± -->
                </tbody>
            </table>
            <div id="qna-pagination" class="pagination"></div>
        </div>
    </div>

    <footer>
        <p>&copy; 2026. Luxury Lobby. All rights reserved.</p>
    </footer>

    <script>
        // Î°úÍ∑∏Ïù∏ ÏÉÅÌÉú ÌôïÏù∏ Î∞è Ìó§Îçî Ï≤òÎ¶¨
        const currentUser = localStorage.getItem('currentUser');
        const loginLink = document.getElementById('login-link');
        
        if (currentUser) {
            loginLink.textContent = 'Logout (' + currentUser + ')';
            loginLink.href = '#';
            document.getElementById('mypage-link-li').style.display = 'list-item';
            document.getElementById('cart-link-li').style.display = 'list-item';
            loginLink.onclick = function() {
                localStorage.removeItem('currentUser');
                alert('Logged out.');
                location.href = 'index.html';
            };

            // Î°úÍ∑∏Ïù∏Ìïú Í≤ΩÏö∞ ÏÇ¨Ïö©Ïûê Ï†ïÎ≥¥ ÏûêÎèô ÏûÖÎ†•
            const userData = JSON.parse(localStorage.getItem(currentUser));
            if (userData) {
                document.getElementById('name').value = userData.name || '';
                document.getElementById('email').value = userData.email || '';
            }
        }

        function togglePasswordInput(show) {
            document.getElementById('password-group').style.display = show ? 'block' : 'none';
            const pwInput = document.getElementById('post-password');
            if (show) pwInput.setAttribute('required', 'required');
            else pwInput.removeAttribute('required');
        }

        function submitForm(event) {
            event.preventDefault();
            const title = document.getElementById('title').value;
            const name = document.getElementById('name').value;
            const email = document.getElementById('email').value;
            const message = document.getElementById('message').value;
            const isPrivate = document.querySelector('input[name="privacy"]:checked').value === 'private';
            const password = isPrivate ? document.getElementById('post-password').value : null;
            
            const newPost = {
                id: Date.now(),
                title: title,
                author: name,
                email: email,
                content: message,
                date: new Date().toLocaleDateString('ko-KR'),
                isPrivate: isPrivate,
                password: password,
                reply: null
            };

            let posts = JSON.parse(localStorage.getItem('qna_posts')) || [];
            posts.push(newPost);
            localStorage.setItem('qna_posts', JSON.stringify(posts));
            
            alert('Your inquiry has been posted.');
            location.reload();
        }

        let currentPage = 1;
        const itemsPerPage = 5;
        let searchKeyword = '';

        function searchQna() {
            const input = document.getElementById('qna-search-input');
            searchKeyword = input.value.trim().toLowerCase();
            currentPage = 1;
            renderQnaList();
        }

        // Q&A Î™©Î°ù Î†åÎçîÎßÅ
        function renderQnaList() {
            const posts = JSON.parse(localStorage.getItem('qna_posts')) || [];
            const tbody = document.getElementById('qna-list-body');
            const paginationContainer = document.getElementById('qna-pagination');
            
            // Í≤ÄÏÉâ ÌïÑÌÑ∞ÎßÅ
            const filteredPosts = posts.filter(post => 
                post.title.toLowerCase().includes(searchKeyword) || 
                post.author.toLowerCase().includes(searchKeyword)
            );

            if (filteredPosts.length === 0) {
                tbody.innerHTML = '<tr><td colspan="5" style="text-align: center; padding: 30px;">No inquiries found.</td></tr>';
                paginationContainer.innerHTML = '';
                return;
            }

            const reversedPosts = [...filteredPosts].reverse();
            const totalPages = Math.ceil(reversedPosts.length / itemsPerPage);
            const startIndex = (currentPage - 1) * itemsPerPage;
            const currentPosts = reversedPosts.slice(startIndex, startIndex + itemsPerPage);

            tbody.innerHTML = currentPosts.map((post, index) => {
                const statusBadge = post.reply 
                    ? '<span class="status-badge status-answered">Answered</span>' 
                    : '<span class="status-badge status-pending">Pending</span>';
                
                const lockIcon = post.isPrivate ? '<span class="lock-icon">üîí</span>' : '';
                const displayIndex = reversedPosts.length - (startIndex + index);
                
                return `
                    <tr class="qna-row" onclick="togglePost(${post.id})">
                        <td>${displayIndex}</td>
                        <td>${lockIcon}${post.title}</td>
                        <td>${post.author}</td>
                        <td>${post.date}</td>
                        <td>${statusBadge}</td>
                    </tr>
                    <tr id="detail-${post.id}" class="qna-detail-row">
                        <td colspan="5">
                            <div class="qna-detail-content">
                                <div class="qna-question">
                                    ${post.content.replace(/\n/g, '<br>')}
                                </div>
                                ${post.reply ? `
                                    <div class="qna-answer">
                                        ${post.reply.replace(/\n/g, '<br>')}
                                    </div>
                                ` : ''}
                                ${currentUser === 'admin' ? `
                                    <div class="admin-reply-form">
                                        <h4>Admin Reply</h4>
                                        <textarea id="reply-${post.id}" placeholder="Write a reply...">${post.reply || ''}</textarea>
                                        <button onclick="submitReply(${post.id})" style="width: auto; padding: 8px 20px; margin-top: 0;">${post.reply ? 'Update Reply' : 'Post Reply'}</button>
                                    </div>
                                ` : ''}
                            </div>
                        </td>
                    </tr>
                `;
            }).join('');

            // ÌéòÏù¥ÏßÄÎÑ§Ïù¥ÏÖò Î≤ÑÌäº ÏÉùÏÑ±
            let paginationHtml = '';
            for (let i = 1; i <= totalPages; i++) {
                const activeClass = i === currentPage ? 'active' : '';
                paginationHtml += `<button onclick="changePage(${i})" class="page-btn ${activeClass}">${i}</button>`;
            }
            paginationContainer.innerHTML = paginationHtml;
        }

        function changePage(page) {
            currentPage = page;
            renderQnaList();
        }

        function togglePost(id) {
            const post = (JSON.parse(localStorage.getItem('qna_posts')) || []).find(p => p.id === id);
            const detailRow = document.getElementById(`detail-${id}`);
            
            // Ïù¥ÎØ∏ Ïó¥Î†§ÏûàÏúºÎ©¥ Îã´Í∏∞
            if (detailRow.style.display === 'table-row') {
                detailRow.style.display = 'none';
                return;
            }

            // ÎπÑÎ∞ÄÍ∏Ä Ï≤¥ÌÅ¨
            if (post.isPrivate) {
                // Í¥ÄÎ¶¨ÏûêÏù¥Í±∞ÎÇò Î≥∏Ïù∏(Ïó¨Í∏∞ÏÑúÎäî ÎπÑÎ∞ÄÎ≤àÌò∏Î°ú ÌôïÏù∏)Ïù∏ Í≤ΩÏö∞ ÌÜµÍ≥º
                if (currentUser === 'admin') {
                    // Pass
                } else {
                    const inputPw = prompt('This is a secret post. Please enter the password.');
                    if (inputPw !== post.password) {
                        alert('Incorrect password.');
                        return;
                    }
                }
            }

            // Îã§Î•∏ Ïó¥Î¶∞ Ìñâ Îã´Í∏∞ (ÏÑ†ÌÉùÏÇ¨Ìï≠)
            document.querySelectorAll('.qna-detail-row').forEach(row => row.style.display = 'none');
            
            // ÎÇ¥Ïö© ÌëúÏãú
            detailRow.style.display = 'table-row';
        }

        function submitReply(id) {
            const replyContent = document.getElementById(`reply-${id}`).value;
            if (!replyContent) return alert('Please write a reply.');

            let posts = JSON.parse(localStorage.getItem('qna_posts')) || [];
            const postIndex = posts.findIndex(p => p.id === id);
            
            if (postIndex > -1) {
                posts[postIndex].reply = replyContent;
                localStorage.setItem('qna_posts', JSON.stringify(posts));
                alert('Reply posted successfully.');
                location.reload();
            }
        }

        // Ï¥àÍ∏∞Ìôî
        renderQnaList();
    </script>
</body>
</html>