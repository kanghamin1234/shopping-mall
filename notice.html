<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Notices - Luxury Lobby</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@700&family=Montserrat:wght@400;500&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Montserrat', sans-serif;
            margin: 0;
            padding: 0;
            color: #333;
            background-color: #fdfdfd;
        }
        h1, h2, h3 { font-family: 'Playfair Display', serif; }
        
        /* 헤더 스타일 (공통) */
        header {
            background-color: #1a1a1a;
            color: white;
            padding: 1rem 2rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
            border-bottom: 1px solid #444;
        }
        nav ul { list-style: none; display: flex; gap: 25px; margin: 0; padding: 0; }
        nav a { color: white; text-decoration: none; font-weight: bold; transition: color 0.3s ease; }
        nav a:hover { color: #e0c280; }

        .container { max-width: 1000px; margin: 0 auto; padding: 60px 20px; }

        /* 공지사항 리스트 스타일 */
        .notice-list {
            border-top: 2px solid #333;
        }
        .notice-item {
            border-bottom: 1px solid #eee;
        }
        .notice-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 20px;
            cursor: pointer;
            transition: background-color 0.2s ease;
        }
        .notice-header:hover {
            background-color: #f9f9f9;
        }
        .notice-title {
            font-weight: 500;
            font-size: 1.1rem;
        }
        .notice-title .badge {
            background-color: #333;
            color: white;
            font-size: 0.75rem;
            padding: 4px 8px;
            border-radius: 4px;
            margin-right: 10px;
            vertical-align: middle;
        }
        .notice-title .badge.important {
            background-color: #a13d3d; /* 중요 공지 색상 */
        }
        .notice-date {
            color: #888;
            font-size: 0.9rem;
            min-width: 100px;
            text-align: right;
        }
        
        /* 공지사항 내용 (초기에는 숨김) */
        .notice-content {
            display: none;
            padding: 30px 40px;
            background-color: #f8f8f8;
            color: #555;
            line-height: 1.6;
            border-top: 1px solid #eee;
        }
        .notice-content.active {
            display: block;
        }

        footer { background-color: #1a1a1a; color: #aaa; text-align: center; padding: 20px; margin-top: 50px; }

        /* 로딩 화면 스타일 */
        #page-loader {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: #fdfdfd;
            z-index: 99999;
            display: flex;
            justify-content: center;
            align-items: center;
            transition: opacity 0.5s ease;
        }
        .spinner {
            width: 40px;
            height: 40px;
            border: 4px solid #eee;
            border-top: 4px solid #333;
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
    </style>
</head>
<body>
    <!-- 로딩 화면 요소 추가 -->
    <div id="page-loader">
        <div class="spinner"></div>
    </div>

    <header>
        <h1><a href="index.html" style="color: white; text-decoration: none; font-family: 'Playfair Display', serif;">Luxury Lobby</a></h1>
        <nav>
            <ul>
                <li><a href="home.html" style="color: #e0c280;">Home</a></li>
                <li><a href="shop.html">Shop</a></li>
                <li id="mypage-link-li" style="display: none;"><a href="mypage.html">My Page</a></li>
                <li id="cart-link-li" style="display: none;"><a href="cart.html">Cart</a></li>
                <li><a href="login.html" id="login-link">Login</a></li>
            </ul>
        </nav>
    </header>

    <div class="container">
        <h2 style="text-align: center; margin-bottom: 50px; font-size: 2.5rem;">Notices</h2>
        
        <!-- 관리자용 글쓰기 버튼 (기본 숨김) -->
        <div style="text-align: right; margin-bottom: 20px;">
            <button id="write-btn" onclick="location.href='write_notice.html'" style="display: none; padding: 10px 20px; background-color: #333; color: white; border: none; border-radius: 4px; cursor: pointer; font-family: 'Montserrat', sans-serif;">Write Notice</button>
        </div>

        <div class="notice-list" id="notice-list">
            <!-- 자바스크립트로 공지사항 목록이 생성됩니다 -->
        </div>
    </div>

    <footer>
        <p>&copy; 2026. Luxury Lobby. All rights reserved.</p>
    </footer>

    <script>
        // 페이지 로드 시 로딩 화면 처리
        window.addEventListener('load', () => {
            const loader = document.getElementById('page-loader');
            // 0.5초 정도 보여주고 페이드아웃
            setTimeout(() => {
                loader.style.opacity = '0';
                setTimeout(() => {
                    loader.style.display = 'none';
                }, 500);
            }, 500);
        });

        // 공지사항 토글 기능
        function toggleNotice(header) {
            const content = header.nextElementSibling;
            // 현재 클릭한 항목의 표시 여부를 토글
            if (content.style.display === "block") {
                content.style.display = "none";
            } else {
                // (선택사항) 다른 항목들은 닫고 싶다면 아래 주석 해제
                // document.querySelectorAll('.notice-content').forEach(c => c.style.display = 'none');
                content.style.display = "block";
            }
        }

        // 로그인 상태 확인 (공통)
        const currentUser = localStorage.getItem('currentUser');
        const loginLink = document.getElementById('login-link');
        
        if (currentUser) {
            loginLink.textContent = 'Logout (' + currentUser + ')';
            loginLink.href = '#';
            document.getElementById('mypage-link-li').style.display = 'list-item';
            document.getElementById('cart-link-li').style.display = 'list-item';
            loginLink.onclick = function() {
                localStorage.removeItem('currentUser');
                alert('Logged out.');
                location.href = 'index.html';
            };
        }

        // 공지사항 데이터 초기화 및 렌더링
        const defaultNotices = [
            {
                title: "Grand Opening of Luxury Lobby!",
                date: "2024.05.20",
                badge: "Important",
                content: "<p>Welcome to Luxury Lobby!</p><p>We are thrilled to announce the grand opening of our premium online store. Explore our exclusive collection of high-end fashion items.</p><p>To celebrate our opening, we are offering a special 10% discount on all items for the first month. Don't miss out!</p><br><p>- The Luxury Lobby Team</p>"
            },
            {
                title: "Shipping Policy Update",
                date: "2024.06.01",
                badge: "Notice",
                content: "<p>Dear Customers,</p><p>Please be informed that our shipping policy has been updated to provide better service. We now offer free express shipping for orders over $1,000.</p><p>Standard shipping times have also been improved. For more details, please check our 'Terms & Policy' page.</p>"
            },
            {
                title: "Summer Season Off Sale",
                date: "2024.06.15",
                badge: "Event",
                content: "<p>Get ready for the summer!</p><p>Our Summer Season Off Sale begins next week. Up to 30% off on selected summer items including swimwear, sandals, and accessories.</p><p>Stay tuned for more updates.</p>"
            },
            {
                title: "Scheduled Maintenance Notice",
                date: "2024.07.01",
                badge: "System",
                content: "<p>We will be performing scheduled system maintenance on July 5th from 02:00 AM to 04:00 AM (UTC).</p><p>During this time, access to the website may be intermittent. We apologize for any inconvenience caused.</p>"
            }
        ];

        // 로컬 스토리지에서 공지사항 가져오기 (없으면 기본값 저장)
        let notices = JSON.parse(localStorage.getItem('notices'));
        if (!notices) {
            notices = defaultNotices;
            localStorage.setItem('notices', JSON.stringify(notices));
        }

        // 목록 렌더링 (최신순으로 보여주기 위해 reverse 사용)
        const noticeList = document.getElementById('notice-list');
        // 원본 배열을 변경하지 않기 위해 복사 후 reverse
        [...notices].reverse().forEach(n => {
            const badgeClass = n.badge === 'Important' ? 'important' : '';
            noticeList.innerHTML += `
                <div class="notice-item">
                    <div class="notice-header" onclick="toggleNotice(this)">
                        <div class="notice-title"><span class="badge ${badgeClass}">${n.badge}</span>${n.title}</div>
                        <div class="notice-date">${n.date}</div>
                    </div>
                    <div class="notice-content">${n.content}</div>
                </div>
            `;
        });

        // 관리자(admin)인 경우 글쓰기 버튼 표시
        if (currentUser === 'admin') {
            document.getElementById('write-btn').style.display = 'inline-block';
        }
    </script>
</body>
</html>